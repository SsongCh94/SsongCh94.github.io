---
layout: single
title:  "REST api"
categories: cs
toc: true
toc_label: "목차"
toc_sticky: true
author_profile: false
---

# REST api 란 무엇인가.

### 개념

- 서버와 클라이언트 간 통식 방식 중 하나.

### 특성

REST API는 자원 지향 구조(ROA, Resource Oriented Architecture)이며, 상태를 전달하기 위해 대표적으로 사용되는 메서드(HTTP 메서드)가 있다. 이러한 메서드와 URI가 결합되어, 자원에 대한 명확하고 직관적인 인터페이스를 제공한다.

### 자원을 **이름으로 구분**하여.

- REST 에서는 자원을 URI 로 명명한다.
- URI의 네이밍에 따라 API의 직관성과 사용성이 높아진다.
    - URI 는 `Singleton` 과 `Collection Reosurces`을 포함한다.
    - **Singleton** 은 `customer` 와 같이 개별 변수로 표현된 자원이라고 이해할 수 있고,
    - **Collection Resources**는 `customers` 와 같이 복수로 표현된 자원으로, `Sub-collection Resources`를 가질 수 있다. **ex) /customers/{customerId}/accounts**
- **URI 네이밍 규칙**
    - URI 네이밍은 실제로 개발하는 팀의 정책에 따라 달라질 수 있다. 그러나 가장 범용적으로 사용되는 몇 가지 규칙을 따르면 API 설계에 큰 도움이 될 수 있다.
    - URI 네이밍 규칙을 따르면 어떠한 개발자와 소통을 하던 일관성을 유지하며 가독성을 향상시킬 수 있다.
    - 규칙을 따르지 않고, `/보여줘/날씨` or `/show/weather` 와 같이 네이밍을 할 경우 직관성이 떨어지며 무슨 역할을 하는 api인지 헷갈릴 수 있기 때문이다.
    
    > **기본적인 URI 네이밍 규칙**
    > 
    > 
    > > **명사를 사용**하여 자원을 표현한다.
    > > 
    > 
    > > 예외적으로, **controller 와 같은 경우 동사를 허용**한다. /game/play 에 접근 시 게임이 시작된다면, 게임의 시작 여부를 컨트롤하는 URI로 동사 play를 사용한다.
    > > 
    > 
    > > 자원 간 계층 관계를 표현하기 위해 / 를 사용한다.
    > > 
    > > - `**/crews/frontend**` **`/furniture/chair`** 와 같이.
    > 
    > > - (하이픈) 사용으로 가독성을 높일 수 있다. *카멜 or 스네이크 X*
    > > 
    > 
    > > _ (밑줄) 을 사용하지 않는다. *일부 브라우저나 화면에서 글꼴에 따라 가려질 수 있다.*
    > > 
    > 
    > > 소문자를 사용한다.
    > > 
    > 
    > > CRUD 함수의 이름을 사용하지 않는다. *HTTP 메서드로 넣어준다.*
    > > 
    > 
    > > 필터링을 위해 새로운 API를 만들지 않는다.
    > > 
    > > - Query string을 사용한다. **주소?속성=값&속성=값&….**

### 자원의 **상태를 주고 받는다**.

**HTTP 메서드로 상태를 주고받을 수 있다.**

- **GET**, **POST**, **PUT**, **PATCH**, **DELETE** 등이 있다.
- /users + HTTP 메서드 GET or POST 등을 사용함으로써 같은 URI를 사용하면서 다른 동작을 일으킬 수 있다.
- GET - 자원을 검색할 때 사용
- POST - 자원을 생성할 때 사용.
    - /crews 에 body로 {”name”:”ssong”, “type”:”frontend”}
- PUT - 자원을 전체 업데이트할 때 사용.
    - 보내지 않은 정보는 null이 되는 것을 주의하자.
    - {”name”:”ssong”, “type”:”frontend”} 에서 PUT 메서드로 {”name”:”kim”} 을 보내게 되면 type값은 보내지 않았으니 null이 되어버린다.
- PATCH - 자원을 부분 업데이트할 때 사용
    - PUT과 비슷한 설명이지만, PATCH의 경우 보낸 정보만 바꾸고, 보내지 않은 정보의 경우 기존값을 유지한다.name만 보낼 경우 type은 기존의 frontend를 유지한다.
- DELETE - 자원을 삭제할 때 사용

**HTTP 상태코드**

- 1xx : 조건부 응답
- 2xx : 성공
- 3xx : 리다이렉션
- 4xx : 클라이언트 오류
- 5xx : 서버 오류

## 추가지식

### API 버전관리

API를 업데이트하거나 수정할 때, 이전 버전의 API와 호환성 문제를 피하기 위해 버전 관리를 하는 것이 좋다. 
이를 위해 URI에 버전 정보를 포함시키거나, HTTP 헤더를 사용하여 API의 버전을 명시할 수 있다.

### 에러 핸들링

오류 처리도 중요한 부분이다. 서버는 오류 발생 시 응답 코드와 함께 명확한 오류 메시지를 제공해야 한다. 
이를 통해 클라이언트는 무슨 일이 일어났는지 이해하고 적절히 대응할 수 있다.